# Getting Started

## Ограничения

- Мы поддерживаем *только* 64-битный Linux.
- Компилятор – *только* clang++ версии не меньше 8.0.

Эти ограничения нужны для того, чтобы обеспечить предсказуемое поведение сборки и тестов на ваших локальных машинах.

Работая в окружении, отличном от описанного выше, вы лишаетесь техподдержки.

## Первые шаги

### Шаг 1

Заведите в удобном месте директорию для работы с курсом:

```shell
mkdir tpcc
```

В этой директории будут жить _два_ репозитория:
- репозиторий курса с задачами и тестами и
- репозиторий с вашими решениями.

### Шаг 2

Клонируйте в эту директорию репозиторий курса:

```shell
cd tpcc
git clone https://gitlab.com/Lipovsky/tpcc-course-2020.git
```

Репозиторий курса должен оказаться в собственной поддиректории:

```
tpcc
|
+--- tpcc-course-2020
```

### Шаг 3

Подтяните необходимые репозиторию сабмодули:

```shell
cd tpcc-course-2020
git submodule update --init --recursive
```

### Шаг 4

На этом шаге нужно подготовить рабочее окружение для работы с репозиторием и установить консольный клиент.

Есть два варианта:
* Рекомендуемый – вы разворачиваете докер-контейнер со всеми необходимыми зависимостями и работаете в нем.
* Вы самостоятельно устанавливаете необходимые зависимости в хост-систему. В этом случае вы лишаетесь техподдержки.


#### Докер

Следуйте [инструкции](https://gitlab.com/Lipovsky/tpcc-course-2020/tree/master/docs/docker.md).

Репозиторий курса в контейнере находится в `/tpcc`.

Дальнейшие шаги инструкции выполняйте _внутри_ контейнера.

#### Ручная установка

Если вы решили пойти по этому пути, то убедитесь, что у вас свежий стабильный 64-битный Linux.

Установите [необходимые зависимости](https://gitlab.com/Lipovsky/tpcc-course-2020/-/blob/master/docker/tpcc-image/install_deps.sh).

### Шаг 5

Теперь пришел черед установки консольного клиента для работы с курсом. С помощью него вы будете запускать тесты и сдавать задачи.

Если вы развернули контейнер, то залогинтесь в него и перейдите в корень репозитория. Если вы работаете без докера, то просто перейдите в корень репозитория.

Запустите установку клиента:
```shell
./install_client.sh
```

Внимательно и осознанно отвечайте на все вопросы, которые задает вам скрипт установки.

После завершения установки скрипт запустит клиент с командой `help`.

После успешного завершения скрипта установки обязательно перезапустите терминал / перелогинтесь в контейнер.

### Шаг 6

Теперь у вас есть клиент для работы с курсом, он называется `tpcc`.

```shell
tpcc cmake # генерируем файлы для сборки проекта курса
tpcc warmup # собираем общие библиотеки
```

Теперь вы готовы к работе над задачами.

## Работа с клиентом

### Команды

#### Уровень репозитория

Эти команды можно запускать в любом месте репозитория:

- `update` – обновить репозиторий курса и сабмодули. После этой команды стоит выполнять команду `cmake`
- `cmake` – перегенерировать файлы сборки, нужно вызывать после обновления репозитория.
- `warmup` – собрать общие библиотеки.

### Уровень задачи

Эти команды нужно вызывать из директории с задачей:

- `test` – собрать и запустить тесты задачи
- `lint` – запустить линтеры на решении задачи

Остальные команды будут описаны в документации по тестирующей системе.

## Troubleshooting

Если у вас возникли проблемы, то сначала попытайтесь разобраться с ними самостоятельно, и только потом пишите в чат техподдержки.

Если вы пишете в чат поддержки, то пожалуйста приложите через [pastebin](https://pastebin.com/) полный выхлоп клиента вместе с командой и диагностической информацией: 

```
rlipovsky@57c3eda1a8c3:/$ tpcc status
--------------------------------------------------------------------------------
Good evening, rlipovsky!

Command running: ['status'], cwd: /
Platform: Linux-4.19.76-linuxkit-x86_64-with-Ubuntu-18.04-bionic
C++ compiler: /usr/bin/clang++-8 (clang version 8.0.0-3~ubuntu18.04.2 (tags/RELEASE_800/final))
Python: 3.6.9, CPython, /tpcc/tpcc-course-2020/client/venv/bin/python
Repository root directory: /tpcc/tpcc-course-2020
Git current commit: 97fa5f8d9f85030c95a417f8e267f4d0f6fe6c01
...
```

Возможно вам пригодятся ссылки из [Toolchain](https://gitlab.com/Lipovsky/tpcc-course-2020/blob/master/docs/toolchain.md).

## Документы

Внимательно прочитайте ключевые документы:

- [Правила выставления оценок](https://gitlab.com/Lipovsky/tpcc-course-2020/blob/master/docs/grading.md)
- [Кодекс чести](https://gitlab.com/Lipovsky/tpcc-course-2020/blob/master/docs/honorcode.md)
- [Style Guide](https://gitlab.com/Lipovsky/tpcc-course-2020/blob/master/docs/styleguide.md)

По ходу семестра будет заполняться [FAQ](https://gitlab.com/Lipovsky/tpcc-course-2020/blob/master/docs/faq.md)

## Telegram

Подпишитесь на [чаты и канал курса](https://gitlab.com/Lipovsky/tpcc-course-2020/blob/master/docs/telegram.md).
